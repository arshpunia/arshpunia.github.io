<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Kindle, Remote Assets, and EPUBs  | Arsh Punia</title>
<meta name="keywords" content="" />
<meta name="description" content="EPUBs are more than just ZIP files">
<meta name="author" content="">
<link rel="canonical" href="https://arshpunia.github.io/posts/kindle_remote_img_source/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://arshpunia.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://arshpunia.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://arshpunia.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://arshpunia.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://arshpunia.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Kindle, Remote Assets, and EPUBs " />
<meta property="og:description" content="EPUBs are more than just ZIP files" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://arshpunia.github.io/posts/kindle_remote_img_source/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-09T13:40:56-04:00" />
<meta property="article:modified_time" content="2022-09-09T13:40:56-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Kindle, Remote Assets, and EPUBs "/>
<meta name="twitter:description" content="EPUBs are more than just ZIP files"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://arshpunia.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Kindle, Remote Assets, and EPUBs ",
      "item": "https://arshpunia.github.io/posts/kindle_remote_img_source/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Kindle, Remote Assets, and EPUBs ",
  "name": "Kindle, Remote Assets, and EPUBs ",
  "description": "EPUBs are more than just ZIP files",
  "keywords": [
    
  ],
  "articleBody": "I recently created an HTML file, converted it to EPUB, and sent it to my Kindle. While the files were loading correctly (including images) in both formats on my desktop, the Kindle would not display the images. Instead, it was showing a thumbnail of a camera as a placeholder.\nPresumably, the issue lay with how the Kindle was handling the EPUB. Some preliminary research took me to Kindle Direct Publishing’s image guidelines. In the code samples here, all the inline images were stored locally. The src attributes of the img tags in my original HTML, however, were all referencing assets on remote servers.\nUpon pointing the src attributes to a local image of a chicken nugget, the images rendered as expected on the Kindle.\nLessons Learnt There’s two key lessons I drew from this experience. First, EPUBs can effectively be thought of as ZIP files 1 with a few added bells and whistles (more details in the next section). This makes it easier to consider one’s e-books as self-contained respositories of text, metadata, and assets; as opposed to a single HTML file - a fallacy one is especially vulnerable to in the case of stand-alone articles.\nSecond, as a developer, it is important to consider the constraints and limitations of the system that will eventually run your code. It was erronous judgement on my part to not consider that most Kindles are not always online and would therefore not support remote asset retrieval.\nAppendix - Understanding EPUBs I admit the epub.equals(zip) = true treatment is a bit of an oversimplification so I am going to try and add some context here. The EPUB Open Container Format (OCF) “defines a file format and processing model for encapsulating the set of related resources that comprise an EPUB Publication into a single-file container, the EPUB Container” (Source). It is this EPUB container that is the “packaging and distribution format for EPUB publications” (Source). It is important to note here that the OCF itself is built upon Open Document Format (ODF) ZIP technologies, with added features for obfuscating embedded resources, such as fonts.\nIn other words, some folks got together and built the OCF on top of ZIP. OCF takes your text, assets, and metadata, and ultimately yields an EPUB container that you can then send to your Kindle.\n  Try changing the extension from .epub to .zip. You’ll actually be able to view all the text, media, and metadata files that constitute your EPUB. ↩︎\n   ",
  "wordCount" : "410",
  "inLanguage": "en",
  "datePublished": "2022-09-09T13:40:56-04:00",
  "dateModified": "2022-09-09T13:40:56-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://arshpunia.github.io/posts/kindle_remote_img_source/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Arsh Punia",
    "logo": {
      "@type": "ImageObject",
      "url": "https://arshpunia.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://arshpunia.github.io/" accesskey="h" title="Arsh Punia (Alt + H)">Arsh Punia</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://arshpunia.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://arshpunia.github.io/archive/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://arshpunia.github.io/reads/" title="Reads">
                    <span>Reads</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Kindle, Remote Assets, and EPUBs 
    </h1>
    <div class="post-description">
      EPUBs are more than just ZIP files
    </div>
    <div class="post-meta"><span title='2022-09-09 13:40:56 -0400 EDT'>September 9, 2022</span>&nbsp;·&nbsp;2 min

</div>
  </header> 
  <div class="post-content"><p>I recently created an HTML file, converted it to EPUB, and sent it to my Kindle. While the files were loading correctly (including images) in both formats on my desktop, the Kindle would not display the images. Instead, it was showing a thumbnail of a camera as a placeholder.</p>
<p>Presumably, the issue lay with how the Kindle was handling the EPUB. Some preliminary research took me to <a href="https://kdp.amazon.com/en_US/help/topic/G75V4YX5X8GRGXWV">Kindle Direct Publishing&rsquo;s image guidelines</a>. In the code samples here, all the inline images were stored locally. The <code>src</code> attributes of the <code>img</code> tags in my original HTML, however, were all referencing assets on remote servers.</p>
<p>Upon pointing the <code>src</code> attributes to a local image of a <a href="https://i.etsystatic.com/18862914/r/il/9ddd2d/3355087118/il_fullxfull.3355087118_rgbz.jpg">chicken nugget</a>, the images rendered as expected on the Kindle.</p>
<h2 id="lessons-learnt">Lessons Learnt<a hidden class="anchor" aria-hidden="true" href="#lessons-learnt">#</a></h2>
<p>There&rsquo;s two key lessons I drew from this experience. First, EPUBs can effectively be thought of as ZIP files <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> with a few added bells and whistles (<a href="#appendix---understanding-epubs">more details in the next section</a>). This makes it easier to consider one&rsquo;s e-books as self-contained respositories of text, metadata, and assets; as opposed to a single HTML file - a fallacy one is especially vulnerable to in the case of stand-alone articles.</p>
<p>Second, as a developer, it is important to consider the constraints and limitations of the system that will eventually run your code. It was erronous judgement on my part to not consider that most Kindles are not always online and would therefore not support remote asset retrieval.</p>
<h2 id="appendix---understanding-epubs">Appendix - Understanding EPUBs<a hidden class="anchor" aria-hidden="true" href="#appendix---understanding-epubs">#</a></h2>
<p>I admit the <code>epub.equals(zip) = true</code> treatment is a bit of an oversimplification so I am going to try and add some context here. The EPUB Open Container Format (OCF) &ldquo;defines a file format and processing model for encapsulating the set of related resources that comprise an EPUB Publication into a single-file container, the EPUB Container&rdquo; (<a href="https://www.w3.org/publishing/epub3/epub-ocf.html">Source</a>). It is this EPUB container that is the &ldquo;packaging and distribution format for EPUB publications&rdquo; (<a href="https://www.w3.org/publishing/epub3/epub-spec.html#dfn-epub-container">Source</a>). It is important to note here that the OCF itself is built upon Open Document Format (ODF) ZIP technologies, with added features for obfuscating embedded resources, such as fonts.</p>
<p>In other words, some folks got together and built the OCF on top of ZIP. OCF takes your text, assets, and metadata, and ultimately yields an EPUB container that you can then send to your Kindle.</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Try changing the extension from <code>.epub</code> to <code>.zip</code>. You&rsquo;ll actually be able to view all the text, media, and metadata files that constitute your EPUB.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>


  </div>

  <footer class="post-footer">
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://arshpunia.github.io/">Arsh Punia</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
